{{/* Main template */}}
{{$f := . -}}
// Code generated by gcg. DO NOT EDIT.

package {{$f.Package}}

{{range $s := $f.Structs}}
func {{funcName "new"}}{{title $s.Name}} ({{template "args" $s.Fields}}) *{{$s.Name}} {
  st := {{funcName "make"}}{{title $s.Name}}({{- range $v := $s.Fields}}{{$v.Name.Argument}},{{end}})
  return &st
}

func {{funcName "make"}}{{title $s.Name}} ({{template "args" $s.Fields}}) {{$s.Name}} {
  return {{template "return-value" $s}}
}
{{end}}

{{/* Utilities */}}
{{define "args"}}{{range .}}{{.Name.Argument}} {{template "star" .}}{{.Type.Prefix}}{{template "ex-pkg" .}}{{.Type.Name}},{{end}}{{end}}
{{define "star"}}{{if .Type.IsStar}}*{{end}}{{end}}
{{define "ex-pkg"}}{{if .Type.Package}}{{.Type.Package}}.{{end}}{{end}}
{{define "return-value" -}}
  {{.Name}} {
    {{- range $v := .Fields}}
      {{$v.Name.Original}}: {{$v.Name.Argument}},
    {{- end}}
    }
{{- end}}
